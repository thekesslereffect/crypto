<!DOCTYPE html>
<html>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<head>
<style>
	.coinContainer {
    display: grid;
    grid-template-columns: repeat( auto-fit, minmax(100px, 1fr) );
    grid-gap:10px;
    padding: 0px;
    align-content: space-evenly;
    text-align:center;   
  }
  .coinItem {
    font-family: helvetica;
    color:var(--font-color);
     background-color: var(--primary-color); 
    border-spacing: :5px;
    border-radius: 4px;
    padding: 10px ;
    font-size: 16px;
    text-align: center;
    cursor: pointer;
  }
</style>
</head>
<body>
	<!--<button onclick="makeApiCall()">Make API Call</button>-->
	<button onclick="makeCoinItem()">Make Coin Container</button>

	<div id="coinContainer" class="coinContainer">

	</div>
	<div id="apiresult">
	</div>

</body>
<script>

	

	function makeCoinItem() {
		gapi.client.sheets.spreadsheets.values.get({
          spreadsheetId: '1APh4g0zln62ZUEdjCNuowXRR7Y9asnB1BaPtuNnSYF4',
          range: 'Binance BTC!A3:A200'
        }).then((response) => {
        var result = response.result.values; //get the values from the sheet
        console.log(result);
       
		var index;
		var coin = result; //Get all arrays from sheets
		for (index = 0; index < coin.length; ++index) {

		var coinItem= document.createElement("div");
		
		coinItem.className="coinItem";

		document.getElementById("coinContainer").appendChild(coinItem); // create coinItem box

		var coin = coin[index]; //return object value at specific index

		coin = coin.toString();
		coinString = coin.substring(0,coinString.length-1); //convert to string and remove btc at end

		coinItem.innerHTML = coinString; // populate coinItem box with the specific array values
	
		// Create Grid item
		// Create icon, "name from array" + .png
		// Create name, "name from array"
		// Create 24 shape, id="name from array"
		// Create Dst shape, id="name from array"
		// Get value of 24 from sheets
		// Get value of Dst from sheets
		// Change color based on 24
		// Change color based on Dst

	    console.log(coinString);

		}
	});
}

	
/*
    function makeApiCall() {
        gapi.client.sheets.spreadsheets.values.get({
          spreadsheetId: '1APh4g0zln62ZUEdjCNuowXRR7Y9asnB1BaPtuNnSYF4',
          range: 'Binance BTC!A3:A200'
        }).then((response) => {
        var result = response.result.values;
        console.log(result);
        document.getElementById("apiresult").innerHTML = result;
        
      });
    }
    */

    function initClient() {
      var API_KEY = 'AIzaSyDYM8lAPcM_14uH1nQwnIyQvqeGDBt-3fg';  
      var CLIENT_ID = '343795338695-ikt07q9oi2dtu60u4991mhi5dm932jq8.apps.googleusercontent.com';  
      var SCOPE = 'https://www.googleapis.com/auth/spreadsheets.readonly';

      gapi.client.init({
        'apiKey': API_KEY,
        'clientId': CLIENT_ID,
        'scope': SCOPE,
        'discoveryDocs': ['https://sheets.googleapis.com/$discovery/rest?version=v4'],
      }).then(function() {
        gapi.auth2.getAuthInstance().isSignedIn.listen(updateSignInStatus);
        updateSignInStatus(gapi.auth2.getAuthInstance().isSignedIn.get());
      });
    }

    function handleClientLoad() {
      gapi.load('client:auth2', initClient);
    }

    function updateSignInStatus(isSignedIn) {
      if (isSignedIn) {
        makeApiCall();
      }
    }

    function handleSignInClick(event) {
      gapi.auth2.getAuthInstance().signIn();
    }

    function handleSignOutClick(event) {
      gapi.auth2.getAuthInstance().signOut();
    }
</script>
<script async defer src="https://apis.google.com/js/api.js"
      onload="this.onload=function(){};handleClientLoad()"
      onreadystatechange="if (this.readyState === 'complete') this.onload()">
</script>


</html>
